<!DOCTYPE html>
<html>
<head>
    <title>Math Master 100 | MathHub Pro</title>
    <style>
        body { font-family: 'Poppins', sans-serif; text-align: center; background: #1a1a2e; color: white; margin: 0; overflow: hidden; }
        #game-container { max-width: 600px; margin: 5vh auto; padding: 20px; border-radius: 20px; background: #16213e; border: 3px solid #0f3460; position: relative; min-height: 400px; }
        
        /* Time Bar */
        #time-wrapper { width: 100%; height: 8px; background: #0f3460; border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
        #time-bar { height: 100%; width: 100%; background: #e94560; transition: width 1s linear; box-shadow: 0 0 10px #e94560; }

        .stats { display: flex; justify-content: space-between; font-size: 1.1rem; color: #4ecca3; margin-bottom: 10px; }
        #question { font-size: 85px; font-weight: bold; margin: 30px 0; text-shadow: 0 0 20px #4ecca3; }
        input { background: #0f3460; border: none; border-bottom: 4px solid #4ecca3; color: white; font-size: 45px; width: 180px; text-align: center; outline: none; padding: 10px; border-radius: 10px 10px 0 0; }
        
        /* Progress Bar */
        .progress-label { display: flex; justify-content: space-between; font-size: 0.8rem; color: #6c757d; margin-top: 25px; margin-bottom: 5px; }
        #level-wrapper { width: 100%; height: 12px; background: #0f3460; border-radius: 10px; overflow: hidden; }
        #level-bar { height: 100%; width: 1%; background: #4ecca3; transition: 0.5s; }
        
        /* In-Web Game Over Screen */
        #over-screen { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #16213e; border-radius: 20px; flex-direction: column; justify-content: center; align-items: center; z-index: 10; }
        #over-screen h1 { color: #e94560; font-size: 50px; margin-bottom: 10px; }
        .btn-retry { background: #4ecca3; color: #1a1a2e; border: none; padding: 15px 40px; font-size: 20px; font-weight: bold; border-radius: 10px; cursor: pointer; margin-top: 20px; }
        .btn-retry:hover { background: #45b791; transform: scale(1.05); }
    </style>
</head>
<body>

<div id="game-container">
    <div id="over-screen">
        <h1>GAME OVER</h1>
        <p style="font-size: 1.5rem;">Final Score: <b id="final-score" style="color: #4ecca3;">0</b></p>
        <p>Level Reached: <b id="final-level" style="color: #4ecca3;">1</b></p>
        <button class="btn-retry" onclick="restartGame()">Try Again ðŸ”„</button>
    </div>

    <div id="time-wrapper"><div id="time-bar"></div></div>

    <div class="stats">
        <span>SCORE: <b id="score">0</b></span>
        <span style="background: #e94560; padding: 3px 12px; border-radius: 20px; font-size: 0.8rem; color: white;" id="difficulty">EASY</span>
        <span>TIME: <b id="seconds">25</b>s</span>
    </div>

    <div id="question">? + ?</div>
    <input type="number" id="answer" placeholder="?" autofocus autocomplete="off">

    <div class="progress-label">
        <span>Progress to Level 100</span>
        <span>LVL <b id="level">1</b></span>
    </div>
    <div id="level-wrapper"><div id="level-bar"></div></div>
</div>

<script>
    let level = 1; let score = 0; let currentAns = 0;
    let timeLeft = 25;
    let timerInterval;

    function startTimer() {
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            timeLeft--;
            document.getElementById('seconds').innerText = timeLeft;
            document.getElementById('time-bar').style.width = (timeLeft / 25 * 100) + "%";

            if (timeLeft <= 0) {
                showGameOver();
            }
        }, 1000);
    }

    function showGameOver() {
        clearInterval(timerInterval);
        document.getElementById('final-score').innerText = score;
        document.getElementById('final-level').innerText = level;
        document.getElementById('over-screen').style.display = 'flex';
    }

    function restartGame() {
        level = 1; score = 0; timeLeft = 25;
        document.getElementById('score').innerText = score;
        document.getElementById('level').innerText = level;
        document.getElementById('level-bar').style.width = "1%";
        document.getElementById('over-screen').style.display = 'none';
        document.getElementById('answer').value = '';
        document.getElementById('answer').focus();
        generateTask();
        startTimer();
    }

    function generateTask() {
        let n1, n2, op;
        let range = 5 + (level * 2); 
        let ops = ['+'];
        if (level > 5) ops.push('-');
        if (level > 15) ops.push('*');
        if (level > 30) ops.push('/');
        
        op = ops[Math.floor(Math.random() * ops.length)];

        if (op === '+') {
            n1 = Math.floor(Math.random() * range) + 1;
            n2 = Math.floor(Math.random() * range) + 1;
            currentAns = n1 + n2;
        } else if (op === '-') {
            n1 = Math.floor(Math.random() * range) + 10;
            n2 = Math.floor(Math.random() * n1);
            currentAns = n1 - n2;
        } else if (op === '*') {
            n1 = Math.floor(Math.random() * (level > 50 ? 12 : 8)) + 2;
            n2 = Math.floor(Math.random() * (level > 70 ? 10 : 6)) + 2;
            currentAns = n1 * n2;
        } else if (op === '/') {
            n2 = Math.floor(Math.random() * 8) + 2;
            currentAns = Math.floor(Math.random() * 10) + 1;
            n1 = n2 * currentAns;
        }
        document.getElementById('question').innerText = `${n1} ${op} ${n2}`;
        updateDifficulty();
    }

    function updateDifficulty() {
        let label = "EASY";
        if (level > 20) label = "MEDIUM";
        if (level > 50) label = "HARD";
        if (level > 80) label = "GENIUS ðŸ§ ";
        document.getElementById('difficulty').innerText = label;
    }

    document.getElementById('answer').addEventListener('input', (e) => {
        if (parseInt(e.target.value) === currentAns) {
            score += 10;
            if (level < 100) level++;
            timeLeft = Math.min(timeLeft + 1, 25); 
            document.getElementById('score').innerText = score;
            document.getElementById('level').innerText = level;
            document.getElementById('level-bar').style.width = level + "%";
            e.target.value = '';
            generateTask();
        }
    });

    window.onload = () => { generateTask(); startTimer(); };
</script>
</body>
</html>
